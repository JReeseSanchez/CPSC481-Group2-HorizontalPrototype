<!DOCTYPE html>
<html lang="en">
	<head>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/search.css">
        <link rel="stylesheet" href="css/home.css">
        <link rel="stylesheet" href="css/itinerary.css">
        <link rel="stylesheet" href="css/activity-popup.css">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

	</head>
	<body>
      <header>
        <div id="titleHeader">
            <div id="headerLeft">
                <a href="searchLOGIN.html"><button id="navButton">Search</button></a>
                <a href="listItinerary.html"><button id="navButton">List Itineraries</button></a>
            </div>
            <h1 id="title"><a href="homeLOGIN.html">Travel Calgary</a></h1>
            <div id="headerRight">
                <img id="profilePicture" src="images/defaultUser.jpg" width="75" height="75" alt="Profile ">
                <div id="userInfo">
                    <h4>Daisy Sandwich</h4>
                    <a href="home.html"><button id="signoutButton">Sign Out</button></a>
                </div>
            </div>
        </div>
      </header>
      <div id="mainPage">
        <div id="itineraryContainer">
            <div id="box">
                <h2>Plan your next trip here</h2>
                <p>Click the button to begin creating the itinerary to you next trip</p>
                <a href="newItinarary.html"><button>Create Itineraries</button></a>
            </div>
        </div>
        
        <div class="search-container">
        <h2>Search Activities</h2>
        <p>Find activities to do here</p>

            <form action="searchResult.html" method="GET">
                <div class="search-row">
                    <input type="text" id="fname" name="fname" placeholder="Search">
                </div>
                <div id="filters">
                    <div id="filter">
                        <label for="filterType">Type: </label>
                        <select id="filterType" name="filterType" onmouseup="showActiveFilters()">
                            <option value="activity">Activity</option>
                            <option value="resturant">Resturant</option>
                            <option value="hotel">Hotel</option>
                            <option value="park">Park</option>
                            <option value="shopping">Shopping</option>
                        </select>
                    </div>
                    
                    <div id="filter" class="distanceBox">
                        <p>Distance: <span id="distance">10</span>km</p>
                        <input type="range" id="filterDistance" min="5" max="100" step="5" value="10" onmouseup="showActiveFilters()">

                        <script>
                            var slider = document.getElementById("filterDistance");
                            var distance = document.getElementById("distance");
                            distance.innerHTML = slider.value;
        
                            slider.oninput = function(){
                                distance.innerHTML = this.value;
                            }
                        </script>
                    </div>
                    <div id="filter" class="priceBox">
                        <p>Maximum Price: $<span id="price">10</span></p>
                        <input type="range" id="filterPrice" min="10" max="300" step="10" value="50" onmouseup="showActiveFilters()">

                        <script>
                            var sliderPrice = document.getElementById("filterPrice");
                            var price = document.getElementById("price");
                            price.innerHTML = sliderPrice.value;
        
                            sliderPrice.oninput = function(){
                                price.innerHTML = this.value;
                            }
                        </script>
                    </div>
                    <div id="filter">
                        <label for="filterRating">Rating: </label>
                        <select id="filterRating" name="filterRating" onmouseup="showActiveFilters()">
                            <option value="1">&#9733;</option>
                            <option value="2">&#9733;&#9733;</option>
                            <option value="3">&#9733;&#9733;&#9733;</option>
                            <option value="4">&#9733;&#9733;&#9733;&#9733;</option>
                            <option value="5">&#9733;&#9733;&#9733;&#9733;&#9733;</option>
                        </select>
                    </div>
                    <input type="reset" onclick="hideActiveFilters()">
                </div>
            </form>
            <script>
                document.getElementById("fname").addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        window.location.href = "searchResult.html";
                    }
                });
            </script>
            <div id="optionButtons">
                <button style="width: 500px;" onclick="toggleFilters()" id="arrowButton">
                    <img id="filterIcon" src="images/dropdownIcon.png" width="40" height="40" alt="Toggle Filters">
                </button>
            </div>
            <div id="activeFilter">
                <img id="filterPhoto" src="images/activeFilter.webp" width="30" height="30" alt="Active Filters">
                <p>Active Filter(s)</p>
            </div>
        </div>

        <div id="recommendedBox">
            <h2 style="margin-top: 60px; margin-bottom: 30px;"> Recommended Activities</h2>
            <div id="container">
                <div id="activity" onclick="showActivityDetails(this, 'prince-edward')">
                    <img id="activityPhoto" src="images/Little-Caesars-Logo.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
                <div id="activity" onclick="showActivityDetails(this, 'banff')">
                    <img id="activityPhoto" src="images/OlympicOval.jpg" width="250" height="250" alt="Little Caesars">
                    <h3>Skating at the Olympic Oval</h3>
                    <div id="textRow">
                        <p>Activity</p>
                        <p>$10</p>
                    </div>
                    <div id="textRow">
                        <p>30km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>

                </div>
                <div id="activity" onclick="showActivityDetails(this, 'pizza73')">
                    <img id="activityPhoto" src="images/Pizza73Logo.svg.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>2/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
            </div>
        <div id="container">
            <div id="activity" onclick="showActivityDetails(this, 'banff')">
                <img id="activityPhoto" src="images/Little-Caesars-Logo.png" width="250" height="250" alt="Little Caesars">
                <h3>Little Caesars</h3>
                <div id="textRow">
                    <p>Resturant</p>
                    <p>$10-$20</p>
                </div>
                <div id="textRow">
                    <p>10km</p>
                    <p>4/5 &#9733;</p>
                </div>
                <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
            </div>
            <div id="activity" onclick="showActivityDetails(this, 'banff')">
                <img id="activityPhoto" src="images/OlympicOval.jpg" width="250" height="250" alt="Little Caesars">
                <h3>Skating at the Olympic Oval</h3>
                <div id="textRow">
                    <p>Activity</p>
                    <p>$10</p>
                </div>
                <div id="textRow">
                    <p>30km</p>
                    <p>4/5 &#9733;</p>
                </div>
                <a href="newActivity.html"><button>+ Add to Itinerary</button></a>

            </div>
            <div id="activity" onclick="showActivityDetails(this, 'banff')">
                <img id="activityPhoto" src="images/Pizza73Logo.svg.png" width="250" height="250" alt="Little Caesars">
                <h3>Little Caesars</h3>
                <div id="textRow">
                    <p>Resturant</p>
                    <p>$10-$20</p>
                </div>
                <div id="textRow">
                    <p>10km</p>
                    <p>2/5 &#9733;</p>
                </div>
                <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
            </div>
        </div>  
    </div>

<div id="activityPopup" class="activity-popup">
<div class="popup-content">
    <span class="close-popup" onclick="closePopup()">&times;</span>
    <h3 id="popupTitle">Activity Name</h3>
    <p id="popupLocation" class="popup-location">Location: Downtown Calgary</p>
    <p id="popupTime" class="popup-time">Quick Description</p>
    <p id="popupPrice" class="popup-price">Price: $$</p>
    <div id="popupRating" class="popup-rating">
        <span class="star-rating">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
        </span>
        <span class="rating-text">4.0/5.0</span>
    </div>
    <div>
        
    </div>
    <div id="popupReviews" class="popup-reviews">
        <h4>Reviews</h4>
        <div class="review">
            <p class="review-text">"Great experience! Would definitely recommend."</p>
            <p class="reviewer">- John D.</p>
        </div>
        <div class="review">
            <p class="review-text">"Loved it. The staff was very friendly."</p>
            <p class="reviewer">- Sarah M.</p>
        </div>
    </div>
</div>
</div>

</div>

<script>
    var filter = document.getElementById("filters");
    filter.style.display = "none";

    var activeFilter = document.getElementById("activeFilter");
    activeFilter.style.display = "none";

    function toggleFilters() {
        var filter = document.getElementById("filters");
        var icon = document.getElementById("filterIcon");
        
        if (filter.style.display === "none") {
            filter.style.display = "flex";
            // Could rotate the icon here if you want to show it's expanded
        } else {
            filter.style.display = "none";
            // Reset icon rotation
        }
    }

    function showActiveFilters(){
        activeFilter.style.display = "flex";
    }

    function hideActiveFilters(){
        activeFilter.style.display = "none";
    }

    const activityData = {
    'prince-edward': {
    title: 'Little Caesars',
    location: '17th Ave, Calgary, AB',
    description: 'Little Caesars is a well-known pizza chain offering a variety of delicious and affordable pizzas. Located on 17th Ave in Calgary, this spot is perfect for a quick bite with friends or family. Their signature "Hot-N-Ready" pizzas are always fresh and ready to go, making it a convenient choice for those on the move.',
    price: '$10-$20',
    rating: 4.0,
    reviews: [
    { text: 'Totally a bang for your buck!', author: 'Emma T.' },
    { text: 'The pizza is very greasy, did not like.', author: 'Michael R.' }
    ]
    },
    'banff': {
    title: 'Skating at the Olympic Oval',
    location: 'Olympic Oval, Calgary, AB',
    description: 'The Olympic Oval in Calgary is a world-class skating facility that offers an exhilarating experience for skaters of all levels. Known as "The Fastest Ice in the World," this venue provides a unique opportunity to skate where Olympians train. The atmosphere is vibrant, and the facility is well-maintained, making it a must-visit for sports enthusiasts.',
    price: '$10',
    rating: 4.0,
    reviews: [
    { text: 'Great place to skate with friends!', author: 'Anna K.' },
    { text: 'The ice quality is amazing.', author: 'John D.' }
    ]
    },
    'pizza73': {
    title: 'Pizza 73',
    location: '10th Ave, Calgary, AB',
    description: 'Pizza 73 is a Canadian pizza chain known for its wide variety of pizza options, wings, and sides. Located on 10th Ave in Calgary, this branch offers a casual dining experience with quick service. Their customizable pizzas and unique dipping sauces make it a favorite for locals looking for a satisfying meal. Whether dining in or ordering for delivery, Pizza 73 is a reliable choice for pizza lovers.',
    price: '$10-$20',
    rating: 3.5,
    reviews: [
    { text: 'Great variety of toppings and quick service!', author: 'Liam H.' },
    { text: 'The pizza was decent, but the wings were amazing.', author: 'Sophia W.' }
    ]
    }
    };

    // Show activity details popup
    function showActivityDetails(element, activityId) {
    // Prevent checkbox from being checked/unchecked when clicking on the activity
    event.stopPropagation();

    const popup = document.getElementById('activityPopup');
    const data = activityData[activityId] || {
    title: 'Activity Details',
    location: 'Location not specified',
    description: 'Description not available',
    price: '$',
    rating: 3.0,
    reviews: [{ text: 'No reviews yet.', author: '' }]
    };

    // Populate popup with activity data
    document.getElementById('popupTitle').textContent = data.title;
    document.getElementById('popupTime').textContent = `${data.description}`;
    document.getElementById('popupLocation').textContent = `Location: ${data.location}`;
    document.getElementById('popupPrice').textContent = `Price: ${data.price}`;

    // Set rating stars
    const ratingStars = document.getElementById('popupRating').querySelector('.star-rating');
    ratingStars.innerHTML = '';
    for (let i = 1; i <= 5; i++) {
    const star = document.createElement('i');
    star.className = i <= Math.floor(data.rating) ? 'fas fa-star' : 'far fa-star';
    ratingStars.appendChild(star);
    }
    document.getElementById('popupRating').querySelector('.rating-text').textContent = `${data.rating}/5.0`;

    // Set reviews
    const reviewsContainer = document.getElementById('popupReviews');
    reviewsContainer.innerHTML = '<h4>Reviews</h4>';
    data.reviews.forEach(review => {
    const reviewDiv = document.createElement('div');
    reviewDiv.className = 'review';
    reviewDiv.innerHTML = `
        <p class="review-text">"${review.text}"</p>
        <p class="reviewer">- ${review.author}</p>
    `;
    reviewsContainer.appendChild(reviewDiv);
    });

    // Position popup next to the clicked activity
    const rect = element.getBoundingClientRect();
    const popupContent = popup.querySelector('.popup-content');

    // Check if there's enough space on the right
    if (rect.right + 350 < window.innerWidth) {
    popup.style.left = `${rect.right + 10}px`;
    popup.style.top = `${rect.top - 20}px`;
    } else {
    // Not enough space on right, show on left
    popup.style.left = `${rect.left - 350 - 10}px`;
    popup.style.top = `${rect.top - 20}px`;
    }

    // Show popup
    popup.style.display = 'block';
    }

    // Close popup
    function closePopup() {
    document.getElementById('activityPopup').style.display = 'none';
    }

    // Close popup when clicking outside
    window.onclick = function(event) {
    const popup = document.getElementById('activityPopup');
    if (event.target == popup) {
    popup.style.display = 'none';
    }
    }
    </script>
</body>
</html>