<!DOCTYPE html>
<html lang="en">
	<head>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/search.css">
        <link rel="stylesheet" href="css/home.css">
        <link rel="stylesheet" href="css/itinerary.css">
        <link rel="stylesheet" href="css/activity-popup.css">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

		
	</head>
	<body>
      <header>
        <div id="titleHeader">
            <div id="headerLeft">
                <a href="searchLOGIN.html"><button id="navButton">Search</button></a>
                <a href="listItinerary.html"><button id="navButton">List Itineraries</button></a>
            </div>
            <h1 id="title"><a href="homeLOGIN.html">Travel Calgary</a></h1>
            <div id="headerRight">
                <img id="profilePicture" src="images/defaultUser.jpg" width="75" height="75" alt="Profile ">
                <div id="userInfo">
                    <h4>Daisy Sandwich</h4>
                    <a href="home.html"><button id="signoutButton">Sign Out</button></a>
                </div>
            </div>
        </div>
      </header>
      <div id="mainPage">
        <div id="itineraryContainer">
            <h2>Plan your next trip here</h2>
            <p>Click the button to begin creating the itinerary to you next trip</p>
            <a href="newItinarary.html"><button>Create Itineraries</button></a>
        </div>
        
        <div class="search-container">
        <h2>Search Activities</h2>
        <p>Find activities to do here</p>

            <form action="searchResult.html" method="GET">
                <div class="search-row">
                    <input type="text" id="fname" name="fname" placeholder="Search">
                </div>
                <div id="filters">
                    
                    <div id="filter">
                        <label for="filterType">Type: </label>
                        <select id="filterType" name="filterType">
                            <option value="activity">Activity</option>
                            <option value="food">Food</option>
                            <option value="hotel">Hotel</option>
                            <option value="park">Park</option>
                            <option value="shopping">Shopping</option>
                        </select>
                    </div>
                    
                    <div id="filter" class="distanceBox">
                        <p>Distance: <span id="distance">10</span>km</p>
                        <input type="range" id="filterDistance" min="5" max="100" step="5" value="10">

                        <script>
                            var slider = document.getElementById("filterDistance");
                            var distance = document.getElementById("distance");
                            distance.innerHTML = slider.value;
        
                            slider.oninput = function(){
                                distance.innerHTML = this.value;
                            }
                        </script>
                    </div>
                    <div id="filter" class="priceBox">
                        <p>Maximum Price: $<span id="price">10</span></p>
                        <input type="range" id="filterPrice" min="10" max="300" step="10" value="50">

                        <script>
                            var sliderPrice = document.getElementById("filterPrice");
                            var price = document.getElementById("price");
                            price.innerHTML = sliderPrice.value;
        
                            sliderPrice.oninput = function(){
                                price.innerHTML = this.value;
                            }
                        </script>
                    </div>
                    <div id="filter">
                        <label for="filterRating">Rating: </label>
                        <select id="filterRating" name="filterRating">
                            <option value="1">&#9733;</option>
                            <option value="2">&#9733;&#9733;</option>
                            <option value="3">&#9733;&#9733;&#9733;</option>
                            <option value="4">&#9733;&#9733;&#9733;&#9733;</option>
                            <option value="5">&#9733;&#9733;&#9733;&#9733;&#9733;</option>
                        </select>
                    </div>
                    <input type="reset">
                </div>
                
            </form>
            <script>
                document.getElementById("fname").addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        window.location.href = "searchResult.html";
                    }
                });
            </script>
            <div id="optionButtons">
                <button style="width: 500px;" onclick="toggleFilters()" id="arrowButton">
                    <img id="filterIcon" src="images/dropdownIcon.png" width="40" height="40" alt="Toggle Filters">
                </button>
                <p class="filter-label">Filters</p>
            </div>
        </div>

        <div id="recommendedBox">
            <h2 style="margin-top: 60px; margin-bottom: 30px;"> Recommended Activities</h2>
            <div id="container">
                <div id="activity">
                    <img id="activityPhoto" src="images/Little-Caesars-Logo.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
                <div id="activity">
                    <img id="activityPhoto" src="images/OlympicOval.jpg" width="250" height="250" alt="Little Caesars">
                    <h3>Skating at the Olympic Oval</h3>
                    <div id="textRow">
                        <p>Activity</p>
                        <p>$10</p>
                    </div>
                    <div id="textRow">
                        <p>30km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>

                </div>
                <div id="activity">
                    <img id="activityPhoto" src="images/Pizza73Logo.svg.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>2/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
            </div>
            <div id="container">
                <div id="activity">
                    <img id="activityPhoto" src="images/Little-Caesars-Logo.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
                <div id="activity">
                    <img id="activityPhoto" src="images/OlympicOval.jpg" width="250" height="250" alt="Little Caesars">
                    <h3>Skating at the Olympic Oval</h3>
                    <div id="textRow">
                        <p>Activity</p>
                        <p>$10</p>
                    </div>
                    <div id="textRow">
                        <p>30km</p>
                        <p>4/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>

                </div>
                <div id="activity" onclick="showActivityDetails(this, 'banff')">
                    <img id="activityPhoto" src="images/Pizza73Logo.svg.png" width="250" height="250" alt="Little Caesars">
                    <h3>Little Caesars</h3>
                    <div id="textRow">
                        <p>Resturant</p>
                        <p>$10-$20</p>
                    </div>
                    <div id="textRow">
                        <p>10km</p>
                        <p>2/5 &#9733;</p>
                    </div>
                    <a href="newActivity.html"><button>+ Add to Itinerary</button></a>
                </div>
            </div>  
        </div>

        <div id="activityPopup" class="activity-popup">
            <div class="popup-content">
                <span class="close-popup" onclick="closePopup()">&times;</span>
                <h3 id="popupTitle">Activity Name</h3>
                <p id="popupLocation" class="popup-location">Location: Downtown Calgary</p>
                <p id="popupPrice" class="popup-price">Price: $$</p>
                <div id="popupRating" class="popup-rating">
                    <span class="star-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </span>
                    <span class="rating-text">4.0/5.0</span>
                </div>
                <div>
                    
                </div>
                <div id="popupReviews" class="popup-reviews">
                    <h4>Reviews</h4>
                    <div class="review">
                        <p class="review-text">"Great experience! Would definitely recommend."</p>
                        <p class="reviewer">- John D.</p>
                    </div>
                    <div class="review">
                        <p class="review-text">"Loved it. The staff was very friendly."</p>
                        <p class="reviewer">- Sarah M.</p>
                    </div>
                </div>
            </div>
        </div>

      </div>

        <script>
            var filter = document.getElementById("filters");
            filter.style.display = "none";

            function toggleFilters() {
                var filter = document.getElementById("filters");
                var icon = document.getElementById("filterIcon");
                
                if (filter.style.display === "none") {
                    filter.style.display = "flex";
                    // Could rotate the icon here if you want to show it's expanded
                } else {
                    filter.style.display = "none";
                    // Reset icon rotation
                }
            }

            const activityData = {
        'prince-edward': {
            title: 'Prince Edward Island',
            location: 'Prince Edward Island, Calgary',
            price: '$$$',
            rating: 4.5,
            reviews: [
                { text: 'Beautiful island with amazing views!', author: 'Emma T.' },
                { text: 'Worth the visit, but a bit expensive.', author: 'Michael R.' }
            ]
        },
        '17th-ave': {
            title: '17th Avenue',
            location: '17th Ave SW, Calgary',
            price: '$$',
            rating: 4.2,
            reviews: [
                { text: 'Great shopping and dining options!', author: 'Jessica K.' },
                { text: 'Vibrant street with lots to do.', author: 'David L.' }
            ]
        },
        'mr-puffs': {
            title: 'Mr. Puffs',
            location: '123 Main St, Calgary',
            price: '$',
            rating: 4.8,
            reviews: [
                { text: 'Best dessert in Calgary!', author: 'Alex P.' },
                { text: 'The puffs are amazing, must try!', author: 'Sophia G.' }
            ]
        },
        'downtown': {
            title: 'Explore Downtown',
            location: 'Downtown Calgary',
            price: '$',
            rating: 4.0,
            reviews: [
                { text: 'Great architecture and city views.', author: 'Robert J.' },
                { text: 'Lots of interesting shops and cafes.', author: 'Linda M.' }
            ]
        },
        'jump-room': {
            title: 'Lunch at Jump Room',
            location: '456 Centre St, Calgary',
            price: '$$',
            rating: 4.3,
            reviews: [
                { text: 'Delicious food and great atmosphere!', author: 'Thomas B.' },
                { text: 'Good service but a bit pricey.', author: 'Hannah W.' }
            ]
        },
        'banff': {
            title: 'Go to Banff',
            location: 'Banff National Park',
            price: '$$',
            rating: 5.0,
            reviews: [
                { text: 'Breathtaking views and amazing hiking trails!', author: 'Chris P.' },
                { text: 'One of the most beautiful places I\'ve ever visited.', author: 'Maria S.' }
            ]
        },
        'lake-louise': {
            title: 'Visit Lake Louise',
            location: 'Lake Louise, Banff National Park',
            price: '$$',
            rating: 4.9,
            reviews: [
                { text: 'The turquoise water is stunning!', author: 'James F.' },
                { text: 'A must-see when visiting Banff.', author: 'Emily R.' }
            ]
        },
        'long-activity': {
            title: 'Long Activity Name',
            location: 'Various locations in Calgary',
            price: '$$',
            rating: 4.1,
            reviews: [
                { text: 'Great activity despite the long name!', author: 'Taylor S.' },
                { text: 'Worth checking out if you have time.', author: 'Jordan B.' }
            ]
        }
    };
    
    // Show activity details popup
    function showActivityDetails(element, activityId) {
        // Prevent checkbox from being checked/unchecked when clicking on the activity
        event.stopPropagation();
        
        const popup = document.getElementById('activityPopup');
        const data = activityData[activityId] || {
            title: 'Activity Details',
            location: 'Location not specified',
            price: '$',
            rating: 3.0,
            reviews: [{ text: 'No reviews yet.', author: '' }]
        };
        
        // Populate popup with activity data
        document.getElementById('popupTitle').textContent = data.title;
        document.getElementById('popupLocation').textContent = `Location: ${data.location}`;
        document.getElementById('popupPrice').textContent = `Price: ${data.price}`;
        
        // Set rating stars
        const ratingStars = document.getElementById('popupRating').querySelector('.star-rating');
        ratingStars.innerHTML = '';
        for (let i = 1; i <= 5; i++) {
            const star = document.createElement('i');
            star.className = i <= Math.floor(data.rating) ? 'fas fa-star' : 'far fa-star';
            ratingStars.appendChild(star);
        }
        document.getElementById('popupRating').querySelector('.rating-text').textContent = `${data.rating}/5.0`;
        
        // Set reviews
        const reviewsContainer = document.getElementById('popupReviews');
        reviewsContainer.innerHTML = '<h4>Reviews</h4>';
        data.reviews.forEach(review => {
            const reviewDiv = document.createElement('div');
            reviewDiv.className = 'review';
            reviewDiv.innerHTML = `
                <p class="review-text">"${review.text}"</p>
                <p class="reviewer">- ${review.author}</p>
            `;
            reviewsContainer.appendChild(reviewDiv);
        });
        
        // Position popup next to the clicked activity
        const rect = element.getBoundingClientRect();
        const popupContent = popup.querySelector('.popup-content');
        
        // Check if there's enough space on the right
        if (rect.right + 350 < window.innerWidth) {
            popup.style.left = `${rect.right + 10}px`;
            popup.style.top = `${rect.top - 20}px`;
        } else {
            // Not enough space on right, show on left
            popup.style.left = `${rect.left - 350 - 10}px`;
            popup.style.top = `${rect.top - 20}px`;
        }
        
        // Show popup
        popup.style.display = 'block';
    }
    
    // Close popup
    function closePopup() {
        document.getElementById('activityPopup').style.display = 'none';
    }
    
    // Close popup when clicking outside
    window.onclick = function(event) {
        const popup = document.getElementById('activityPopup');
        if (event.target == popup) {
            popup.style.display = 'none';
        }
    }
        </script>
	</body>
</html>